(this["webpackJsonpgoit-react-hw-09-phonebook"]=this["webpackJsonpgoit-react-hw-09-phonebook"]||[]).push([[0],{101:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n.n(c),a=n(22),u=n.n(a),o=n(14),i=n(18),s=n(58),b=(n(72),n(73),n(10)),j=(n(74),n(60)),l=n(26),O=function(t){return t.auth.isAutheticated},d=function(t){return t.auth.user.email},f=n(1),g={link:{textDecoration:"none",color:"black",padding:10},activelink:{color:"white"}};function h(){var t=Object(o.c)(O);return Object(f.jsxs)(l.a,{defaultActiveKey:"/home",as:"ul",children:[Object(f.jsx)(l.a.Item,{as:"li",children:Object(f.jsx)(i.b,{exact:!0,to:"/",className:"NavLink",activeClassName:"NavLink-active",style:g.link,activeStyle:g.activelink,children:"Home"})}),t&&Object(f.jsx)(l.a.Item,{as:"li",children:Object(f.jsx)(i.b,{exact:!0,to:"/contacts",className:"NavLink",activeClassName:"NavLink-active",style:g.link,activeStyle:g.activelink,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"})})]})}var p={link:{textDecoration:"none",color:"black",padding:10},activelink:{color:"white"}},C=function(){return Object(f.jsxs)(l.a,{children:[Object(f.jsx)(l.a.Item,{children:Object(f.jsx)(i.b,{exact:!0,to:"/register",className:"NavLink",activeClassName:"NavLink-active",style:p.link,activeStyle:p.activelink,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})}),Object(f.jsx)(l.a.Item,{children:Object(f.jsx)(i.b,{exact:!0,to:"/login",className:"NavLink",activeClassName:"NavLink-active",style:p.link,activeStyle:p.activelink,children:"\u0412\u043e\u0439\u0442\u0438"})})]})},v=n(44),x=n(31),m={span:{padding:10,color:"white"}};function S(){var t=Object(o.b)(),e=Object(o.c)(d),n=Object(c.useCallback)((function(){t(x.a.logout())}),[t]);return Object(f.jsxs)("div",{children:[Object(f.jsx)("span",{style:m.span,children:e}),Object(f.jsx)(v.a,{variant:"outline-light",type:"button",size:"sm",onClick:n,children:"\u0412\u044b\u0439\u0442\u0438"})]})}function k(){var t=Object(o.c)(O);return Object(f.jsx)("header",{children:Object(f.jsxs)(j.a,{bg:"primary",variant:"dark",className:"justify-content-between",children:[Object(f.jsx)(h,{}),t?Object(f.jsx)(S,{}):Object(f.jsx)(C,{})]})})}var E=function(t){var e=t.children;return Object(f.jsxs)("section",{children:[e,Object(f.jsx)("hr",{})]})},y=n(19),A=n(36);function N(t){var e=t.component,n=Object(A.a)(t,["component"]),c=Object(o.c)(O);return Object(f.jsx)(b.b,Object(y.a)(Object(y.a)({},n),{},{render:function(t){return c?Object(f.jsx)(e,Object(y.a)({},t)):Object(f.jsx)(b.a,{to:"/login"})}}))}function T(t){var e=t.component,n=Object(A.a)(t,["component"]),c=Object(o.c)(O);return Object(f.jsx)(b.b,Object(y.a)(Object(y.a)({},n),{},{render:function(t){return c&&n.restricted?Object(f.jsx)(b.a,{to:"/contacts"}):Object(f.jsx)(e,Object(y.a)({},t))}}))}var R=Object(c.lazy)((function(){return n.e(7).then(n.bind(null,111))})),U=Object(c.lazy)((function(){return n.e(4).then(n.bind(null,107))})),P=Object(c.lazy)((function(){return n.e(5).then(n.bind(null,108))})),_=Object(c.lazy)((function(){return Promise.all([n.e(3),n.e(6)]).then(n.bind(null,109))}));function L(){var t=Object(o.b)();return Object(c.useEffect)((function(){t(x.a.getCurrentUser())}),[t]),Object(f.jsxs)(E,{children:[Object(f.jsx)(k,{}),Object(f.jsx)(c.Suspense,{fallback:Object(f.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c..."}),children:Object(f.jsxs)(b.d,{children:[Object(f.jsx)(b.b,{exact:!0,path:"/",component:R}),Object(f.jsx)(T,{path:"/login",restricted:!0,component:U}),Object(f.jsx)(T,{path:"/register",restricted:!0,component:P}),Object(f.jsx)(N,{path:"/contacts",component:_})]})})]})}var q,D,w,z,I,F=n(37),H=n(3),Q=n(21),B=n(59),J=n.n(B),K=n(7),M=n(12),G=n(28),V=Object(H.c)([],(q={},Object(K.a)(q,G.i,(function(t,e){return e.payload})),Object(K.a)(q,G.c,(function(t,e){return[e.payload].concat(Object(F.a)(t))})),Object(K.a)(q,G.f,(function(t,e){return t.filter((function(t){return t.id!==e.payload}))})),q)),W=Object(H.c)("",Object(K.a)({},G.j,(function(t,e){return e.payload}))),X=Object(M.b)({items:V,filter:W}),Y=n(5),Z={name:null,email:null},$=Object(H.c)(Z,(D={},Object(K.a)(D,Y.a.registerSuccess,(function(t,e){return e.payload.user})),Object(K.a)(D,Y.a.loginSuccess,(function(t,e){return e.payload.user})),Object(K.a)(D,Y.a.logoutSuccess,(function(){return Z})),Object(K.a)(D,Y.a.getCurrentUserSuccess,(function(t,e){return e.payload})),D)),tt=Object(H.c)(null,(w={},Object(K.a)(w,Y.a.registerSuccess,(function(t,e){return e.payload.token})),Object(K.a)(w,Y.a.loginSuccess,(function(t,e){return e.payload.token})),Object(K.a)(w,Y.a.logoutSuccess,(function(){return null})),w)),et=Object(H.c)(null,(z={},Object(K.a)(z,Y.a.registerError,(function(t,e){return e.payload})),Object(K.a)(z,Y.a.loginError,(function(t,e){return e.payload})),Object(K.a)(z,Y.a.logoutError,(function(t,e){return e.payload})),Object(K.a)(z,Y.a.getCurrentUserError,(function(t,e){return e.payload})),z)),nt=Object(H.c)(!1,(I={},Object(K.a)(I,Y.a.registerSuccess,(function(){return!0})),Object(K.a)(I,Y.a.loginSuccess,(function(){return!0})),Object(K.a)(I,Y.a.getCurrentUserSuccess,(function(){return!0})),Object(K.a)(I,Y.a.loginError,(function(){return!1})),Object(K.a)(I,Y.a.logoutError,(function(){return!1})),Object(K.a)(I,Y.a.getCurrentUserError,(function(){return!1})),Object(K.a)(I,Y.a.logoutSuccess,(function(){return!1})),I)),ct=Object(M.b)({user:$,isAutheticated:nt,token:tt,error:et}),rt=[].concat(Object(F.a)(Object(H.d)({serializableCheck:{ignoredActions:[Q.a,Q.f,Q.b,Q.c,Q.d,Q.e]}})),[function(t){return function(t){return function(e){t(e)}}}]),at={key:"auth",storage:J.a,whitelist:["token"]},ut=Object(H.a)({reducer:{auth:Object(Q.g)(at,ct),contacts:X},middleware:rt}),ot={store:ut,persistor:Object(Q.h)(ut)};u.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(o.a,{store:ot.store,children:Object(f.jsx)(s.a,{loading:null,persistor:ot.persistor,children:Object(f.jsx)(i.a,{children:Object(f.jsx)(L,{})})})})}),document.getElementById("root"))},28:function(t,e,n){"use strict";n.d(e,"h",(function(){return r})),n.d(e,"i",(function(){return a})),n.d(e,"g",(function(){return u})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return s})),n.d(e,"e",(function(){return b})),n.d(e,"f",(function(){return j})),n.d(e,"d",(function(){return l})),n.d(e,"j",(function(){return O}));var c=n(3),r=Object(c.b)("APP/FETCH_CONTACT_REQUEST"),a=Object(c.b)("APP/FETCH_CONTACT_SUCCESS"),u=Object(c.b)("APP/FETCH_CONTACT_ERROR"),o=Object(c.b)("APP/ADD_CONTACT_REQUEST"),i=Object(c.b)("APP/ADD_CONTACT_SUCCESS"),s=Object(c.b)("APP/ADD_CONTACT_ERROR"),b=Object(c.b)("APP/DEL_CONTACT_REQUEST"),j=Object(c.b)("APP/DEL_CONTACT_SUCCESS"),l=Object(c.b)("APP/DEL_CONTACT_ERROR"),O=Object(c.b)("APP/FILTER_CONTACT")},31:function(t,e,n){"use strict";var c=n(25),r=n.n(c),a=n(5);r.a.defaults.baseURL="https://connections-api.herokuapp.com";var u=function(t){r.a.defaults.headers.common.Authorization="Bearer ".concat(t)},o=function(){r.a.defaults.headers.common.Authorization=""};e.a={register:function(t){return function(e){e(a.a.registerRequest()),r.a.post("/users/signup",t).then((function(t){var n=t.data;u(n.token),e(a.a.registerSuccess(n))})).catch((function(t){return e(a.a.registerError(t.message))}))}},login:function(t){return function(e){e(a.a.loginRequest()),r.a.post("/users/login",t).then((function(t){var n=t.data;u(n.token),e(a.a.loginSuccess(n))})).catch((function(t){return e(a.a.loginError(t.message))}))}},logout:function(){return function(t){t(a.a.logoutRequest()),r.a.post("/users/logout").then((function(){o(),t(a.a.logoutSuccess())})).catch((function(e){return t(a.a.logoutError(e.message))}))}},getCurrentUser:function(){return function(t,e){var n=e().auth.token;n&&(u(n),t(a.a.getCurrentUserRequest()),r.a.get("/users/current").then((function(e){var n=e.data;t(a.a.getCurrentUserSuccess(n))})).catch((function(e){return t(a.a.getCurrentUserError(e.message))})))}}}},5:function(t,e,n){"use strict";var c=n(3),r=Object(c.b)("auth/registerRequest"),a=Object(c.b)("auth/registerSuccess"),u=Object(c.b)("auth/registerError"),o=Object(c.b)("auth/loginRequest"),i=Object(c.b)("auth/loginSuccess"),s=Object(c.b)("auth/loginError"),b=Object(c.b)("auth/logoutRequest"),j=Object(c.b)("auth/logoutSuccess"),l=Object(c.b)("auth/logoutError"),O=Object(c.b)("auth/getCurrentUserRequest"),d=Object(c.b)("auth/getCurrentUserSuccess"),f=Object(c.b)("auth/getCurrentUserError");e.a={registerRequest:r,registerSuccess:a,registerError:u,loginRequest:o,loginSuccess:i,loginError:s,logoutRequest:b,logoutSuccess:j,logoutError:l,getCurrentUserRequest:O,getCurrentUserSuccess:d,getCurrentUserError:f}},72:function(t,e,n){},74:function(t,e,n){}},[[101,1,2]]]);
//# sourceMappingURL=main.913df667.chunk.js.map